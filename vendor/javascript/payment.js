// payment@2.4.7 downloaded from https://ga.jspm.io/npm:payment@2.4.7/lib/index.js

import*as t from"globalthis/polyfill";import*as e from"qj";var r=t;try{"default"in t&&(r=t.default)}catch(t){}var n=e;try{"default"in e&&(n=e.default)}catch(t){}var a=typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:global;var i={};(function(){var t,e,u,l,o,f,c,h,g,s,d,p,v,m,y,C,$,w,D,P,k,L,b,x,S,E,N=[].indexOf||function(t){for(var e=0,r=(this||a).length;e<r;e++)if(e in(this||a)&&(this||a)[e]===t)return e;return-1};y=r();e=n;c=/(\d{1,4})/g;o=[{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[4],luhn:true},{type:"dankort",pattern:/^5019/,format:c,length:[16],cvcLength:[3],luhn:true},{type:"dinersclub",pattern:/^(36|38|30[0-5])/,format:/(\d{1,4})(\d{1,6})?(\d{1,4})?/,length:[14],cvcLength:[3],luhn:true},{type:"discover",pattern:/^(6011|65|64[4-9]|622)/,format:c,length:[16],cvcLength:[3],luhn:true},{type:"elo",pattern:/^401178|^401179|^431274|^438935|^451416|^457393|^457631|^457632|^504175|^627780|^636297|^636369|^636368|^(506699|5067[0-6]\d|50677[0-8])|^(50900\d|5090[1-9]\d|509[1-9]\d{2})|^65003[1-3]|^(65003[5-9]|65004\d|65005[0-1])|^(65040[5-9]|6504[1-3]\d)|^(65048[5-9]|65049\d|6505[0-2]\d|65053[0-8])|^(65054[1-9]|6505[5-8]\d|65059[0-8])|^(65070\d|65071[0-8])|^65072[0-7]|^(65090[1-9]|65091\d|650920)|^(65165[2-9]|6516[6-7]\d)|^(65500\d|65501\d)|^(65502[1-9]|6550[3-4]\d|65505[0-8])|^(65092[1-9]|65097[0-8])/,format:c,length:[16],cvcLength:[3],luhn:true},{type:"hipercard",pattern:/^(384100|384140|384160|606282|637095|637568|60(?!11))/,format:c,length:[14,15,16,17,18,19],cvcLength:[3],luhn:true},{type:"jcb",pattern:/^(308[8-9]|309[0-3]|3094[0]{4}|309[6-9]|310[0-2]|311[2-9]|3120|315[8-9]|333[7-9]|334[0-9]|35)/,format:c,length:[16,19],cvcLength:[3],luhn:true},{type:"laser",pattern:/^(6706|6771|6709)/,format:c,length:[16,17,18,19],cvcLength:[3],luhn:true},{type:"maestro",pattern:/^(50|5[6-9]|6007|6220|6304|6703|6708|6759|676[1-3])/,format:c,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:true},{type:"mastercard",pattern:/^(5[1-5]|677189)|^(22[2-9][1-9]|2[3-6]\d{2}|27[0-1]\d|2720)/,format:c,length:[16],cvcLength:[3],luhn:true},{type:"mir",pattern:/^220[0-4][0-9][0-9]\d{10}$/,format:c,length:[16],cvcLength:[3],luhn:true},{type:"troy",pattern:/^9792/,format:c,length:[16],cvcLength:[3],luhn:true},{type:"unionpay",pattern:/^62/,format:c,length:[16,17,18,19],cvcLength:[3],luhn:false},{type:"visaelectron",pattern:/^4(026|17500|405|508|844|91[37])/,format:c,length:[16],cvcLength:[3],luhn:true},{type:"visa",pattern:/^4/,format:c,length:[13,16],cvcLength:[3],luhn:true}];u=function(t){var e,r,n,a,i;t=(t+"").replace(/\D/g,"");r=void 0;for(n=0,a=o.length;n<a;n++){e=o[n];(i=t.match(e.pattern))&&(!r||i[0].length>r[1][0].length)&&(r=[e,i])}return r&&r[0]};l=function(t){var e,r,n;for(r=0,n=o.length;r<n;r++){e=o[r];if(e.type===t)return e}};$=function(t){var e,r,n,a,i,u;i=true;u=0;r=(t+"").split("").reverse();for(n=0,a=r.length;n<a;n++){e=r[n];e=parseInt(e,10);(i=!i)&&(e*=2);e>9&&(e-=9);u+=e}return u%10===0};C=function(t){var e;try{if(t.selectionStart!=null&&t.selectionStart!==t.selectionEnd)return true;if((typeof document!=="undefined"&&document!==null&&(e=document.selection)!=null?e.createRange:void 0)!=null&&document.selection.createRange().text)return true}catch(t){t}return false};w=function(r){return setTimeout(function(n){return function(){var n,a;n=r.target;a=e.val(n);a=t.fns.formatCardNumber(a);f(n,a);return e.trigger(n,"change")}}())};s=function(t){return function(r){var n,a,i,l,o,f,c,h,g,s,d;if(r.which>0){a=String.fromCharCode(r.which);d=e.val(r.target)+a}else{a=r.data;d=e.val(r.target)}if(/^\d+$/.test(a)){h=r.target;n=u(d);f=d.replace(/\D/g,"").length;s=[16];n&&(s=n.length);t&&(s=s.filter((function(e){return e<=t})));for(i=l=0,o=s.length;l<o;i=++l){g=s[i];if(!(f>=g&&s[i+1])&&f>=g)return}if(!C(h)){c=n&&n.type==="amex"?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/;d=d.substring(0,d.length-1);if(c.test(d)){r.preventDefault();e.val(h,d+" "+a);return e.trigger(h,"change")}}}}};h=function(t){var r,n;r=t.target;n=e.val(r);if(!t.meta&&t.which===8&&!C(r)){if(/\d\s$/.test(n)){t.preventDefault();e.val(r,n.replace(/\d\s$/,""));return e.trigger(r,"change")}if(/\s\d?$/.test(n)){t.preventDefault();e.val(r,n.replace(/\s\d?$/,""));return e.trigger(r,"change")}}};d=function(t){var r,n,a;n=t.target;if(t.which>0){r=String.fromCharCode(t.which);a=e.val(n)+r}else{r=t.data;a=e.val(n)}if(/^\d+$/.test(r)){if(/^\d$/.test(a)&&a!=="0"&&a!=="1"){t.preventDefault();e.val(n,"0"+a+" / ");return e.trigger(n,"change")}if(/^\d\d$/.test(a)){t.preventDefault();e.val(n,a+" / ");return e.trigger(n,"change")}}};m=function(t){var r,n,a;r=String.fromCharCode(t.which);if(/^\d+$/.test(r)){n=t.target;a=e.val(n)+r;if(/^\d$/.test(a)&&a!=="0"&&a!=="1"){t.preventDefault();e.val(n,"0"+a);return e.trigger(n,"change")}if(/^\d\d$/.test(a)){t.preventDefault();e.val(n,""+a);return e.trigger(n,"change")}}};p=function(t){var r,n,a;r=String.fromCharCode(t.which);if(/^\d+$/.test(r)){n=t.target;a=e.val(n);if(/^\d\d$/.test(a)){e.val(n,a+" / ");return e.trigger(n,"change")}}};v=function(t){var r,n,a;r=String.fromCharCode(t.which);if(r==="/"){n=t.target;a=e.val(n);if(/^\d$/.test(a)&&a!=="0"){e.val(n,"0"+a+" / ");return e.trigger(n,"change")}}};g=function(t){var r,n;if(!t.metaKey){r=t.target;n=e.val(r);if(t.which===8&&!C(r)){if(/\d(\s|\/)+$/.test(n)){t.preventDefault();e.val(r,n.replace(/\d(\s|\/)*$/,""));return e.trigger(r,"change")}if(/\s\/\s?\d?$/.test(n)){t.preventDefault();e.val(r,n.replace(/\s\/\s?\d?$/,""));return e.trigger(r,"change")}}}};x=function(t){var e;if(t.metaKey||t.ctrlKey)return true;if(t.which===32)return t.preventDefault();if(t.which===0)return true;if(t.which<33)return true;e=String.fromCharCode(t.which);return/[\d\s]/.test(e)?void 0:t.preventDefault()};P=function(t){return function(r){var n,a,i,l,o;l=r.target;a=String.fromCharCode(r.which);if(/^\d+$/.test(a)&&!C(l)){o=(e.val(l)+a).replace(/\D/g,"");n=u(o);i=16;n&&(i=n.length[n.length.length-1]);t&&(i=Math.min(i,t));return o.length<=i?void 0:r.preventDefault()}}};L=function(t,r){var n,a,i;a=t.target;n=String.fromCharCode(t.which);if(/^\d+$/.test(n)&&!C(a)){i=e.val(a)+n;i=i.replace(/\D/g,"");return i.length>r?t.preventDefault():void 0}};k=function(t){return L(t,6)};b=function(t){return L(t,2)};S=function(t){return L(t,4)};D=function(t){var r,n,a;n=t.target;r=String.fromCharCode(t.which);if(/^\d+$/.test(r)&&!C(n)){a=e.val(n)+r;return a.length<=4?void 0:t.preventDefault()}};E=function(r){var n,a,i,u,l;u=r.target;l=e.val(u);i=t.fns.cardType(l)||"unknown";if(!e.hasClass(u,i)){n=function(){var t,e,r;r=[];for(t=0,e=o.length;t<e;t++){a=o[t];r.push(a.type)}return r}();e.removeClass(u,"unknown");e.removeClass(u,n.join(" "));e.addClass(u,i);e.toggleClass(u,"identified",i!=="unknown");return e.trigger(u,"payment.cardType",i)}};f=function(t,r){var n;n=t.selectionEnd;e.val(t,r);if(n)return t.selectionEnd=n};t=function(){function Payment(){}Payment.J=e;Payment.fns={cardExpiryVal:function(t){var e,r,n,a;t=t.replace(/\s/g,"");n=t.split("/",2),e=n[0],a=n[1];if((a!=null?a.length:void 0)===2&&/^\d+$/.test(a)){r=(new Date).getFullYear();r=r.toString().slice(0,2);a=r+a}e=parseInt(e,10);a=parseInt(a,10);return{month:e,year:a}},validateCardNumber:function(t){var e,r;t=(t+"").replace(/\s+|-/g,"");if(!/^\d+$/.test(t))return false;e=u(t);return!!e&&((r=t.length,N.call(e.length,r)>=0)&&(e.luhn===false||$(t)))},validateCardExpiry:function(t,r){var n,a,i,u,l;typeof t==="object"&&"month"in t?(u=t,t=u.month,r=u.year):typeof t==="string"&&N.call(t,"/")>=0&&(l=Payment.fns.cardExpiryVal(t),t=l.month,r=l.year);if(!(t&&r))return false;t=e.trim(t);r=e.trim(r);if(!/^\d+$/.test(t))return false;if(!/^\d+$/.test(r))return false;t=parseInt(t,10);if(!(t&&t<=12))return false;if(r.length===2){i=(new Date).getFullYear();i=i.toString().slice(0,2);r=i+r}a=new Date(r,t);n=new Date;a.setMonth(a.getMonth()-1);a.setMonth(a.getMonth()+1,1);return a>n},validateCardCVC:function(t,r){var n,a;t=e.trim(t);return!!/^\d+$/.test(t)&&(r&&l(r)?(n=t.length,N.call((a=l(r))!=null?a.cvcLength:void 0,n)>=0):t.length>=3&&t.length<=4)},cardType:function(t){var e;return t&&((e=u(t))!=null?e.type:void 0)||null},formatCardNumber:function(t){var e,r,n,a;e=u(t);if(!e)return t;a=e.length[e.length.length-1];t=t.replace(/\D/g,"");t=t.slice(0,a);if(e.format.global)return(n=t.match(e.format))!=null?n.join(" "):void 0;r=e.format.exec(t);if(r!=null){r.shift();r=r.filter((function(t){return t}));return r.join(" ")}}};Payment.restrictNumeric=function(t){e.on(t,"keypress",x);return e.on(t,"input",x)};Payment.cardExpiryVal=function(t){return Payment.fns.cardExpiryVal(e.val(t))};Payment.formatCardCVC=function(t){Payment.restrictNumeric(t);e.on(t,"keypress",D);e.on(t,"input",D);return t};Payment.formatCardExpiry=function(t){var r,n;Payment.restrictNumeric(t);if(t.length&&t.length===2){r=t[0],n=t[1];this.formatCardExpiryMultiple(r,n)}else{e.on(t,"keypress",k);e.on(t,"keypress",d);e.on(t,"keypress",v);e.on(t,"keypress",p);e.on(t,"keydown",g);e.on(t,"input",d)}return t};Payment.formatCardExpiryMultiple=function(t,r){e.on(t,"keypress",b);e.on(t,"keypress",m);e.on(t,"input",m);e.on(r,"keypress",S);return e.on(r,"input",S)};Payment.formatCardNumber=function(t,r){Payment.restrictNumeric(t);e.on(t,"keypress",P(r));e.on(t,"keypress",s(r));e.on(t,"keydown",h);e.on(t,"keyup blur",E);e.on(t,"blur",s(r));e.on(t,"paste",w);e.on(t,"input",s(r));return t};Payment.getCardArray=function(){return o};Payment.setCardArray=function(t){o=t;return true};Payment.addToCardArray=function(t){return o.push(t)};Payment.removeFromCardArray=function(t){var e,r;for(e in o){r=o[e];r.type===t&&o.splice(e,1)}return true};return Payment}();i=t;y.Payment=t}).call(i);var u=i;export{u as default};

